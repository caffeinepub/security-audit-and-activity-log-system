{
  "kind": "build_request",
  "title": "Remove refresh behavior (no auto-refetch and no page reload refresh)",
  "projectName": "ICP Ops Console",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-111",
      "text": "Remove the full page-refresh behavior from the Web Controller Tools panel by eliminating the \"Refresh Connection\" action that calls window.location.reload(), and replace it with a non-refresh action that re-runs backend connectivity checks (e.g., React Query refetch) without reloading the page.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Remove the refresh"
        ]
      },
      "acceptanceCriteria": [
        "The \"Refresh Connection\" button in frontend/src/components/WebControlQuickToolsPanel.tsx no longer triggers a browser reload.",
        "Users can still manually trigger a connection re-check from the Web Controller Tools UI without any page reload.",
        "All user-facing text remains in English."
      ]
    },
    {
      "id": "REQ-112",
      "text": "Disable React Query automatic refetch behavior that can feel like an implicit \"refresh\" (including refetch-on-window-focus and refetch-on-reconnect), so data updates happen only via explicit user actions (buttons) or via deliberate cache invalidation after a user-initiated mutation.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Remove the refresh"
        ]
      },
      "acceptanceCriteria": [
        "React Query does not automatically refetch queries when the tab/window regains focus.",
        "React Query does not automatically refetch queries when the browser reconnects to the network.",
        "Queries still update when the user clicks explicit retry/refetch UI controls (e.g., retry buttons) or after a mutation invalidates relevant queries."
      ]
    },
    {
      "id": "REQ-113",
      "text": "Remove any code that force-refetches large portions of the React Query cache as a side-effect of actor creation/changes (i.e., avoid global refetchQueries patterns that behave like an app-wide refresh), while keeping correctness when identity or ICP target changes.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Remove the refresh"
        ]
      },
      "acceptanceCriteria": [
        "The app no longer performs a broad, automatic refetch of most queries solely because the backend actor instance changed.",
        "Role/status and other backend-driven UI still updates correctly after explicit user actions (e.g., login/logout, role grant/revoke, retry connection).",
        "No new loading screens or full-page refresh behavior is introduced."
      ]
    }
  ],
  "constraints": [
    "Frontend immutable paths must not be edited: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui/*.",
    "Keep all user-facing text in English."
  ],
  "nonGoals": [
    "Do not add new backend APIs or change backend authorization logic.",
    "Do not add new features unrelated to removing refresh/auto-refresh behavior (e.g., new dashboards, new roles, new panels).",
    "Do not change routing or role-based access rules beyond what is necessary to remove refresh behavior."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}